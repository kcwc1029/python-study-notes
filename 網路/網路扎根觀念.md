## MAC、IP、Subnet Mask 與 Gateway 說明

![upgit_20240422_1713721472.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240422_1713721472.png)

-   mac address: 00:1A:2B:3C:4D:5E。前六碼廠商代號，後六碼稱呼為流水號。
-   ipv4: 就是電腦的 ip，例如`192.168.1.50`
-   子網路遮罩：`255.255.255.0`，三個 255 就是切到第三碼`192.168.1`。只要封包他的目標 ip 是`192.168.1`，那就是同一個網段。反之不同網段。那如果是同網段，就會直接將封包傳給他，如果不同網段，那就會將封包傳給 geteway。
-   預設閘道（geteway）：例如`192.168.1.1`，就是往外傳的大門。
-   DNS 伺服器：就是將`142.251.43.3`轉成`www.google.com.tw`

## 網路七層

![upgit_20240422_1713721620.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240422_1713721620.png)

## TCP/IP

![upgit_20240422_1713721644.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240422_1713721644.png)

## 使用固定 IP 或浮動 IP

## Hub、Switch、Router 網路設備介紹

![upgit_20240422_1713722750.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240422_1713722750.png)

＄ Hub、Switch 在同一網段，Router 用在切割網段。
＄ 網段就是`192.168.1.25`第三位（第四位就是你的電腦）
＄ 同一網段指的是會受到同一廣播。例如要 dhcp 這種廣播封包，同一網段內電腦都會受影響。
＄ 同一個網段不可以有太多電腦，否則會發生廣播風暴 -> 需要 Router 切網段。
＄ Router 除了切網段，還有連接安全。

＄ Hub、Switcht 差別為 Hub 不會記電腦 mac 位置、Switch 會。
＄當 Switch 記下電腦 mac 位置後，下次要寄封包，就會直接寄，就不用廣播了。
＄ Hub 的話，就是都用廣播的。所以一次重送一台電腦的資料。

## 路由（routing）

＄在網路七層中，第三層（網路）會加上來源/目的 ip，第二層（資料連結）會加上來源/目的 mac。

＄ `tracert` 是 Windows 中用於跟蹤數據包路由的命令，而在 macOS（或其他 Unix 系統）中，使用 `traceroute` 命令來執行相同的操作。
![upgit_20240422_1713723555.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240422_1713723555.png)

＄範例：從我家電腦連到 google
![upgit_20240422_1713724514.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240422_1713724514.png)
＄ 注意：目的 iP 不會變（因為我要連到 google），但目的 mac 會因為 router 一直換而改變。

## 認識 IPV4

＄ `129.7.3.1` = `10000001.00000111.00000011.00000001`
＄前三碼為網段，第四碼為主機。
![upgit_20240422_1713725474.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240422_1713725474.png)

### @ 特殊 ip 位址

＄第一個跟最後一個不能用：

-   192.168.1.0/24：他是一個網段，不是 ip
-   192.168.1.255：是一個廣播封包

### @ 私有 ip 位址

-   **Class A**：10.0.0.0 到 10.255.255.255
-   **Class B**：172.16.0.0 到 172.31.255.255
-   **Class C**：192.168.0.0 到 192.168.255.255
    ＄ 互联网服务提供商（ISP）提供的路由器设备遇到私有 ip，是不會放行的。
    ＄ 相對，駭客較不容易從外面連到公司內部的私有 ip 電腦，也較安全。
    ＄ 那如何讓內部電腦使用私有 ip 但有可以上網 -> nat（network address translation，IP 分享器）
    ![upgit_20240422_1713726143.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240422_1713726143.png)

## VDSL 與 Cable

[](https://www.youtube.com/@pinju)
![upgit_20240422_1713726395.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240422_1713726395.png)

## 子網段切割

＄ 假設公司有四個部門，共用一個網段

-   首先在 router 的遮罩為`255.255.255.0`，這樣就會將該網段切出來（假如是`100.100.100.00000000`）
-   那因為我要再切四個部門，因此將第四碼前兩位一起埋來做網段。因此可以使用一台 router，四台 switch 做網段切割。
-   `100.100.100.00xxxxxxxx` -> 0-63（每個 x 可以為 10，因此可以給 2^6 = 64 台同網段電腦）
-   `100.100.100.01xxxxxxxx` -> 64-127（每個 x 可以為 10，因此可以給 2^6 = 64 台同網段電腦）
-   `100.100.100.10xxxxxxxx` -> 128-192（每個 x 可以為 10，因此可以給 2^6 = 64 台同網段電腦）
-   `100.100.100.11xxxxxxxx` -> 192-255（每個 x 可以為 10，因此可以給 2^6 = 64 台同網段電腦）
-   設定好後來定義遮罩，定義為 `11111111.11111111.11111111.1100000000` -> `255.255.255.192`

＄ 假如今天遮罩定義為 `11111111.11111111.11111111.1110000000` -> `255.255.255.224`

-   那就是切割 8 的子網段，每一個網段可以給 2^5 = 32 台同網段電腦

＄ 題目：一台 PC 的 ip 為`200.100.100.162`，遮罩為`255.255.255.240`，求該 PC 網段廣播 IP？

-   遮罩最後一位為`240`，二進制為`11110000`，因此他一共切割成 16 段：
-   `200.100.100.0` - `200.100.100.15`
-   `200.100.100.16` - `200.100.100.31`
-   `200.100.100.32` - `200.100.100.47`
    ...
-   `200.100.100.160` - `200.100.100.175` -> 該 PC 在這網段，所以網段廣播 IP 為 `200.100.100.175`
-   `200.100.100.176` - `200.100.100.192`

## ARP & ICMP

＄ 在網路七層中，第三層（網路）會增加來源/目的 ip，第二層（資料連結）會增加來源/目的 mac。

＄ ARP（Address Resolution Protocol） 工作就是去廣播問同網段某個 PC 的 mac。

-   arp -a ：列出当前计算机已解析过的 IP 地址与对应的 MAC 地址。这些解析信息通常在计算机与局域网内其他设备进行通信时自动获取，并且会被缓存以提高通信效率。
-   arp id \*（mac/linux 為 sudo arp -d -a）：清除所有 ARP 缓存條目。

＄ 操作範例：

-   先使用`arp -a`叫出所有 arp
-   下` arp id *`請除所有 ARP 緩存
-   `ping 8.8.8.8` 去連接
-   在使用`arp -a`叫出所有 arp 查看。

![upgit_20240425_1714032502.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240425_1714032502.png)

＄ ICMP（Internet Control Message Protocol）它是 TCP/IP 協議族中的一個子協議，用於在 IP 網絡上發送控制消息。也是在第三（網路）層。

＄ ICMP 主要用於在 IP 網絡上進行診斷和錯誤報告。它允許計算機向其他計算機發送錯誤報告、詢問網絡狀態以及進行網絡診斷。

＄ 喜歡用 ping 測網路？ 因為只要 ping 成功，那剩下就是一二層，基本就隸屬於硬體的問題了。

## IPV6

-   16 禁制，一共 128 bits
-   `2001:0db8:85a3:0000:0000:8a2e:0370:7334`

＄ IPV6 由 IANA 所配發，第一段為區域，第二段為 ISP 供應商，第三段配給下面公司。

## DHCP（动态主机配置协议）

＄ 位於第七層（應用）。
![upgit_20240425_1714034043.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240425_1714034043.png)

＄在 client 與 DHCP server 中間，會經過四次。

-   第一次 client 向 DHCP server 廣播 discover 封包，詢問是否有 DHCP server
-   DHCP server 回覆 offer 封包 （我是 DHCP server，要租給你的 ip、遮罩、geteway）
-   client 向 DHCP server 發送 request 封包，選擇要承租的 ip 等資訊。
-   DHCP server 回覆 ack 封包

## WiFi 無線網路介紹

＄ 可分為全雙工與半雙工。
＄ 802.11 wifi 採用半雙工。

-   ssid：連接 wifi 熱點的名稱。
-   每一個 AP 都會有自己的 bssid（就是一個 mac address）
-   一台 AP 所可以聯網的範圍，稱為 BSS(basic service set)
-   而由多台 AP，共同保持一個 ssid，就可以形成漫遊，也稱為 ESS(extend service set)
![upgit_20240425_1714035991.png](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2024/04/upgit_20240425_1714035991.png)

