## collection 模組用法

```python
# Counter：用于统计可迭代对象中元素的数量。
from collections import Counter

word_list = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple']
word_counter = Counter(word_list)
print(word_counter)
letters = "jwidhihfivjrjiiorjeifojaioajdoijdoiasjioa"
print(Counter(letters)) # Counter({'i': 10, 'j': 8, 'o': 6, 'a': 4, 'd': 3, 'h': 2, 'f': 2, 'r': 2, 'w': 1, 'v': 1, 'e': 1, 's': 1})
print(Counter(letters).most_common()) # 次數最大排好
print(Counter(letters).most_common(2)) # 最常見兩個
# [('i', 10), ('j', 8), ('o', 6), ('a', 4), ('d', 3), ('h', 2), ('f', 2), ('r', 2), ('w', 1), ('v', 1), ('e', 1), ('s', 1)]
# [('i', 10), ('j', 8)]
```

```python
# defaultdict：是 `dict` 的一个子类，在访问不存在的键时使用该默认值。
from collections import defaultdict
fruit_dict = defaultdict(int)
fruit_dict['apple'] += 1
fruit_dict['banana'] += 2
print(fruit_dict)
# Output: defaultdict(<class 'int'>, {'apple': 1, 'banana': 2})
```

```python
# namedtuple：用于创建具有字段名的元组子类，使得元组更具可读性。
from collections import namedtuple
from math import sqrt
# 舉例：兩點求絕對值->沒有用
point1, point2 = (1,5),(2.5,1.5)
line_length = sqrt((point1[0]-point2[0])**2 + (point1[1]-point2[1])**2)
print(line_length)
```

```python
# 使用namedtuple
Point = namedtuple("Point",["x","y"])
point1, point2 = Point(1,5), Point(2.5, 1.5)
line_length = sqrt((point1.x-point2.x)**2 + (point1.y-point2.y)**2)
print(line_length)
# 3.8078865529319543
# 3.8078865529319543
```

## datetime 模組用法

-   datetime 模块提供了处理日期和时间的类
-   timedelta 类则用于表示两个日期或时间之间的差异。

```python
# 取出時間成分
from datetime import datetime
from datetime import timedelta
x = datetime.now()
print(x.year, x.month, x.day, x.hour, x.minute, x.second) # 2024 2 27 1 18 17
```

```python
# 創建日期對象
y = datetime(2022, 5,1)
print(x-y) # 667 days, 1:18:17.728932
```

```python
# 格式化日期
formatted_str = x.strftime("%Y-%m-%d %H:%M:%S")
print(formatted_str) # 2024-02-27 01:18:58
```

```python
# string轉時間對象
str_date = "2022-03-01 12:30:00"
converted_datetime = datetime.strptime(str_date, "%Y-%m-%d %H:%M:%S")
print(converted_datetime) # 2022-03-01 12:30:00
```

```python
# 创建一个时间差对象
time_difference = timedelta(days=5, hours=3, minutes=30)
print(time_difference) # 5 days, 3:30:00

```

```python
# 计算未来/过去的日期：
current_datetime = datetime.now()
future_date = current_datetime + time_difference
past_date = current_datetime - time_difference
print(f"Future Date: {future_date}") # Future Date: 2024-03-03 04:51:40.803688
print(f"Past Date: {past_date}") # Past Date: 2024-02-21 21:51:40.803688

```

```python
# 计算两个日期之间的差异：
date1 = datetime(2022, 3, 1)
date2 = datetime(2022, 2, 25)
difference = date1 - date2
print(f"Difference in days: {difference.days}") # Difference in days: 4


now = datetime.now()
gap = timedelta(1) # 增加一天的時間段
tomorrow = now + gap
print(tomorrow) # 2024-02-28 01:19:57.660212

```

## math 模組用法

```python
import math
print(math.pi)
print(math.e)
print(math.inf)
print(-math.inf)
# math.ceil(x) 無條件進位
# math.floor(x) 無條件捨去
# math.isnan(x) 是否是nan
# math.pow(x, y)
# math.sqrt(x)
# math.log(x, base)
```

## random 模組用法

```python
##### random module #####
import random
print(random.random()) # 0.0-1.0
print(random.randint(1,10)) # 返回整數
print(random.randrange(1,10,2))

# 設定種子 random.seed(10)
random.seed(10)
print(random.random())


# random.choice
# random.choices
my_list = [1, 2, 3, 4, 5]
sentance = "hi, this is just a sentance."
print(random.choice(my_list)) # 從列表中隨機選擇一個元素 4
print(random.choices(my_list, k=3)) # 從列表中隨機選擇三個元素 [3, 1, 3]

# random.sample 用于从序列中随机选择指定数量的元素，且所选元素互不相同
print(random.sample(my_list, 2)) # [4, 3]

# random.shuffle 序列中的元素随机打乱顺序
random.shuffle(my_list)
print(my_list) # [4, 5, 3, 1, 2]

```

## regular expression 正規表達式

| 語法    | 描述                     | 示例                                                                                                                        |
| ------- | ------------------------ | --------------------------------------------------------------------------------------------------------------------------- |
| `.`     | 代表一個字符             | `r"he..o"` 可以匹配 `hello`、`helko`                                                                                        |
| `[]`    | 匹配括號內的任意一個字符 | `[0-9]` 匹配數字 0-9<br>`[0-3][0-9]` 匹配 00-39<br>`[a-zA-Z]` 匹配英文字母<br>`r"he[abcl][a-d]o"` 可以匹配 `heaao`、`hecco` |
| `\\d`   | 匹配一個數字             | `r"file\\d"` 可以匹配 `file0`、`file1`                                                                                      |
| `\\D`   | 匹配一個非數字           | `r"\\D\\D"` 可以匹配 `He`、`?+`                                                                                             |
| `\\w`   | 匹配一個字母或數字       | `r"\\w-\\w"` 可以匹配 `4-3`、`a-b`                                                                                          |
| `\\W`   | 匹配一個非字母非數字字符 | `r"\\W"` 可以匹配 `?`                                                                                                       |
| `\\s`   | 匹配任何空白字符         | `r"a\\sb\\sc"` 可以匹配 `a b c`                                                                                             |
| `\\S`   | 匹配任何非空白字符       | -                                                                                                                           |
| `*`     | 匹配前面的字符零次或多次 | -                                                                                                                           |
| `+`     | 匹配前面的字符一次或多次 | -                                                                                                                           |
| `{m}`   | 匹配前面的字符 m 次      | `r"hello\\d{3}"` 可以匹配 `hello123`                                                                                        |
| `{m,n}` | 匹配前面的字符 m 到 n 次 | `r"hello\\d{3,5}"` 可以匹配 `hello123`、`hello12345`                                                                        |
| `{m,}`  | 匹配前面的字符至少 m 次  | `r"hello\\d{3,}"` 可以匹配 `hello123`、`hello12345`、`hello123456`                                                          |
| `\\.`   | 匹配一個實際的點 `.`     | -                                                                                                                           |
| `\\b`   | 匹配一個單詞邊界         | `r"\\bis"` 可以匹配 `" is"`                                                                                                 |

```python
##### regular expression 正規表達式 #####
# row string 去除掉特殊字源的功能
print("\\n")
print(r"\\n") # row string

import re
text = "my number is 0978123456, i am avaliable from 8am to 5pm."
patt = "from"
math = re.search(patt, text)
print(math.group(), math.span(), math.start(), math.end())
print(re.findall(patt, text))



# regular expression for email
# ?????@???.???
regex = r"\\b[A-Za-z0-9]+@[A-Za-z0-9]+\\.[A-Za-z]{2,}\\b"
regex = r"[^@]+@[^@]+\\.[^@]"
def check_email(email):
    if re.fullmatch(regex, email):print(f"{email} is valid")
    else: print(f"{email} is not valid.")




# 針對regular expression的練習
# 要找出(數字+英文+空白, 數字>=4)
import re
import os

with open("research.txt", encoding="utf8") as f:
    text = f.read()
    x = re.findall(r"\\([a-zA-Z0-9\\s]+, \\d{4,}\\)", text)
    print(x)




# 日本的電話111-222-3333
# 找出所有電話，放進list輸出
ans = []
def search(s):
    regex = r"\\d{3}-\\d{3}-\\d{4}"
    r = re.findall(regex, s)
    if r:
        for i in r:ans.append(i)

for folder, subfolders, files in os.walk("Employee"):
# for folder in os.walk("Employee"):
    for f in files:
        with open(os.path.join(folder,f), encoding="utf8") as my_file:
            text = my_file.read()
            search(text)
print(ans)
```

## zipfile 模組

```python
import zipfile
import shutil

# 壓縮檔案（只能一個一個去做指定壓縮）
zip_file = zipfile.ZipFile("research.zip","w") #壓縮檔檔案名稱
zip_file.write("research.txt", compress_type=zipfile.ZIP_DEFLATED) # 指令文件，並以預設模式壓縮
zip_file.write("research2.txt", compress_type=zipfile.ZIP_DEFLATED) # 指令文件，並以預設模式壓縮
zip_file.close()


# 解壓縮檔案
zip_file = zipfile.ZipFile("research.zip","r") #壓縮檔檔案名稱，針對某一個壓縮檔做讀的動作
zip_file.extractall("result") # 解壓縮後放的資料夾名稱
zip_file.close()


# 壓縮資料夾
zip_folder = "/Users/chenweicheng/Documents/python程式練習/Employee" # 要壓縮的資料夾路徑
zipp_folder = "/Users/chenweicheng/Documents/python程式練習/Employee_zip" # 壓縮完成的資料夾（包含路徑）
shutil.make_archive(zipp_folder,"zip", zip_folder)


# 解壓縮資料夾
zipp_folder = "/Users/chenweicheng/Documents/python程式練習/Employee_zip.zip" # 壓縮完成的資料夾（包含路徑）
zip_folder = "/Users/chenweicheng/Documents/python程式練習/TestZipfolder" # 解壓縮的資料夾名稱 （包含路徑）
shutil.unpack_archive(zipp_folder, zip_folder, "zip")
```
